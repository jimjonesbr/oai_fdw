SELECT OAI_Version() IS NULL;
 ?column? 
----------
 f
(1 row)

SELECT * FROM OAI_ListMetadataFormats('oai_server_ulb');
 metadataprefix |                               schema                               |              metadatanamespace              
----------------+--------------------------------------------------------------------+---------------------------------------------
 oai_dc         | http://www.openarchives.org/OAI/2.0/oai_dc.xsd                     | http://www.openarchives.org/OAI/2.0/oai_dc/
 mets           | http://www.loc.gov/standards/mets/mets.xsd                         | http://www.loc.gov/METS/
 mods           | http://www.loc.gov/standards/mods/v3/mods-3-0.xsd                  | http://www.loc.gov/mods/v3
 rawmods        | http://www.loc.gov/standards/mods/v3/mods-3-0.xsd                  | http://www.loc.gov/mods/v3
 epicur         | http://www.persistent-identifier.de/xepicur/version1.0/xepicur.xsd | urn:nbn:de:1111-2004033116
(5 rows)

SELECT * FROM OAI_ListMetadataFormats('oai_server_dnb');
  metadataprefix  |                                   schema                                    |                            metadatanamespace                            
------------------+-----------------------------------------------------------------------------+-------------------------------------------------------------------------
 MARC21plus-1-xml | http://www.loc.gov/standards/marcxml/schema/MARC21slim.xsd                  | http://www.loc.gov/MARC21/slim
 baseDc-xml       | http://oai.base-search.net/base_dc/base_dc.xsd                              | http://oai.base-search.net/base_dc
 BibframeRDFxml   | http://www.w3.org/2000/07/rdf.xsd                                           | http://www.w3.org/1999/02/22-rdf-syntax-ns
 RDFprov-xml      | http://www.w3.org/2000/07/rdf.xsd                                           | http://www.w3.org/1999/02/22-rdf-syntax-ns
 crossref-xml     | https://www.crossref.org/schema/crossref4.4.0.xsd                           | http://www.crossref.org/schema/4.4.0
 RDFprovPlus-xml  | http://www.w3.org/2000/07/rdf.xsd                                           | http://www.w3.org/1999/02/22-rdf-syntax-ns
 JATS-xml         | http://jats.nlm.nih.gov/publishing/1.0/xsd/JATS-journalpublishing.xsd       | http://jats.nlm.nih.gov/publishing/1.0
 MARC21plus-xml   | http://www.loc.gov/standards/marcxml/schema/MARC21slim.xsd                  | http://www.ddb.de/professionell/MARC21/plus
 PicaPlus-xml     | http://www.oclcpica.org/xmlns/ppxml-1.0.xsd                                 | http://www.oclcpica.org/xmlns/ppxml-1.0
 RDFxml           | http://www.w3.org/2000/07/rdf.xsd                                           | http://www.w3.org/1999/02/22-rdf-syntax-ns
 xMetaDiss        | http://www.d-nb.de/standards/xmetadiss/xmetadiss.xsd                        | http://www.d-nb.de/standards/xMetaDiss/
 oai_dc           | http://www.openarchives.org/OAI/2.0/oai_dc.xsd                              | http://www.openarchives.org/OAI/2.0/oai_dc
 mods-xml         | http://www.loc.gov/standards/mods/v3/mods-3-6.xsd                           | http://www.loc.gov/mods/v3
 MARC21-xml       | http://www.loc.gov/standards/marcxml/schema/MARC21slim.xsd                  | http://www.loc.gov/MARC21/slim
 ONIX-xml         | http://www.editeur.org/onix/2.1/short/ONIX_BookProduct_Release2.1_short.xsd | http://www.editeur.org/onix/2.1/short/ONIX_BookProduct_Release2.1_short
 sync-repo-xml    | http://files.dnb.de/standards/formate/syncrepo.xsd                          | http://www.d-nb.de/schemas/syncrepo
(16 rows)

SELECT * FROM OAI_ListMetadataFormats('oai_server_bioj');
WARNING:  HeaderCallbackFunction: unsupported header entry: "content-type: text/plain; charset=utf-8"
WARNING:  HeaderCallbackFunction: unsupported header entry: "content-type: text/plain; charset=utf-8"
WARNING:  ExecuteOAIRequest (ListMetadataFormats): request to 'https://www.bioj-online.com/jms/index.php/up/oai/' failed (1)
WARNING:  HeaderCallbackFunction: unsupported header entry: "content-type: text/plain; charset=utf-8"
WARNING:  ExecuteOAIRequest (ListMetadataFormats): request to 'https://www.bioj-online.com/jms/index.php/up/oai/' failed (2)
WARNING:  HeaderCallbackFunction: unsupported header entry: "content-type: text/plain; charset=utf-8"
WARNING:  ExecuteOAIRequest (ListMetadataFormats): request to 'https://www.bioj-online.com/jms/index.php/up/oai/' failed (3)
ERROR:  ExecuteOAIRequest => (23) Failed writing header

SELECT * FROM OAI_ListMetadataFormats('oai_server_bjihs');
 metadataprefix |                                 schema                                  |                       metadatanamespace                        
----------------+-------------------------------------------------------------------------+----------------------------------------------------------------
 oai_dc         | http://www.openarchives.org/OAI/2.0/oai_dc.xsd                          | http://www.openarchives.org/OAI/2.0/oai_dc/
 rfc1807        | http://www.openarchives.org/OAI/1.1/rfc1807.xsd                         | http://info.internet.isi.edu:80/in-notes/rfc/files/rfc1807.txt
 oai_marc       | http://www.openarchives.org/OAI/1.1/oai_marc.xsd                        | http://www.openarchives.org/OAI/1.1/oai_marc
 marcxml        | http://www.loc.gov/standards/marcxml/schema/MARC21slim.xsd              | http://www.loc.gov/MARC21/slim
 jats           | https://jats.nlm.nih.gov/publishing/0.4/xsd/JATS-journalpublishing0.xsd | http://jats.nlm.nih.gov
(5 rows)

SELECT * FROM OAI_ListMetadataFormats('oai_server_kbnl');
 metadataprefix | schema | metadatanamespace 
----------------+--------+-------------------
 admin          |        | 
 dc             |        | 
 dcx            |        | 
 didl           |        | 
 didle          |        | 
 index          |        | 
 INDEXING       |        | 
 marc21         |        | 
 mods           |        | 
 nl_didl        |        | 
 pica           |        | 
 picaplus       |        | 
 schema         |        | 
 clarin         |        | 
 rdf            |        | 
(15 rows)

SELECT * FROM OAI_ListMetadataFormats('oai_server_davidrumsey');
 metadataprefix |                     schema                     |              metadatanamespace              
----------------+------------------------------------------------+---------------------------------------------
 oai_dc         | http://www.openarchives.org/OAI/2.0/oai_dc.xsd | http://www.openarchives.org/OAI/2.0/oai_dc/
(1 row)

SELECT * FROM OAI_ListSets('oai_server_ulb') 
WHERE setname IS NOT NULL AND setspec IS NOT NULL 
ORDER BY setname 
FETCH FIRST ROW ONLY;
     setspec      |            setname            
------------------+-------------------------------
 fremdbestand_hbz | Fremdbestand (Verbundkatalog)
(1 row)

SELECT * FROM OAI_ListSets('oai_server_dnb') 
WHERE setname IS NOT NULL AND setspec IS NOT NULL 
ORDER BY setname 
FETCH FIRST ROW ONLY;
     setspec     |                  setname                   
-----------------+--------------------------------------------
 authorities:dif | Bestand Deutsches Filminstitut (DIF e. V.)
(1 row)

SELECT * FROM OAI_ListSets('oai_server_bjihs') 
WHERE setname IS NOT NULL AND setspec IS NOT NULL 
ORDER BY setname 
FETCH FIRST ROW ONLY;
  setspec  |              setname              
-----------+-----------------------------------
 bjihs:ACC | Anais de Conferências Científicas
(1 row)

SELECT * FROM OAI_ListSets('oai_server_kbnl') 
WHERE setname IS NOT NULL AND setspec IS NOT NULL 
ORDER BY setname 
FETCH FIRST ROW ONLY;
 setspec | setname 
---------+---------
 ALBA    | ALBA
(1 row)

SELECT * FROM OAI_ListSets('oai_server_davidrumsey') 
WHERE setname IS NOT NULL AND setspec IS NOT NULL 
ORDER BY setname 
FETCH FIRST ROW ONLY;
  setspec   |                setname                 
------------+----------------------------------------
 RUMSEY~8~1 | David Rumsey Historical Map Collection
(1 row)

SELECT count(*) > 0 
FROM OAI_ListSets('oai_server_dnb') 
WHERE setname IS NOT NULL AND setspec IS NOT NULL;
 ?column? 
----------
 t
(1 row)

-- must fail: repositoriy no longer exists
SELECT * FROM OAI_ListSets('oai_server_bioj');
WARNING:  HeaderCallbackFunction: unsupported header entry: "content-type: text/plain; charset=utf-8"
WARNING:  HeaderCallbackFunction: unsupported header entry: "content-type: text/plain; charset=utf-8"
WARNING:  ExecuteOAIRequest (ListSets): request to 'https://www.bioj-online.com/jms/index.php/up/oai/' failed (1)
WARNING:  HeaderCallbackFunction: unsupported header entry: "content-type: text/plain; charset=utf-8"
WARNING:  ExecuteOAIRequest (ListSets): request to 'https://www.bioj-online.com/jms/index.php/up/oai/' failed (2)
WARNING:  HeaderCallbackFunction: unsupported header entry: "content-type: text/plain; charset=utf-8"
WARNING:  ExecuteOAIRequest (ListSets): request to 'https://www.bioj-online.com/jms/index.php/up/oai/' failed (3)
ERROR:  ExecuteOAIRequest => (23) Failed writing header

SELECT * FROM OAI_Identify('oai_server_ulb');
       name        |                             description                              
-------------------+----------------------------------------------------------------------
 repositoryName    | Visual Library Server der Universitäts- und Landesbibliothek Münster
 baseURL           | http://sammlungen.ulb.uni-muenster.de/oai/
 protocolVersion   | 2.0
 adminEmail        | vl-support@semantics.de
 earliestDatestamp | 2011-02-22T15:12:26Z
 deletedRecord     | no
 granularity       | YYYY-MM-DDThh:mm:ssZ
(7 rows)

SELECT * FROM OAI_Identify('oai_server_dnb');
       name        |                     description                      
-------------------+------------------------------------------------------
 repositoryName    | OAI-Repository of the German National Library V2.0.9
 baseURL           | https://services.dnb.de/oai/repository
 protocolVersion   | 2.0
 adminEmail        | oai-repository@dnb.de
 earliestDatestamp | 1945-01-01T00:00:00Z
 deletedRecord     | transient
 granularity       | YYYY-MM-DDThh:mm:ssZ
(7 rows)

SELECT * FROM OAI_Identify('oai_server_bioj');
WARNING:  HeaderCallbackFunction: unsupported header entry: "content-type: text/plain; charset=utf-8"
WARNING:  HeaderCallbackFunction: unsupported header entry: "content-type: text/plain; charset=utf-8"
WARNING:  ExecuteOAIRequest (Identify): request to 'https://www.bioj-online.com/jms/index.php/up/oai/' failed (1)
WARNING:  HeaderCallbackFunction: unsupported header entry: "content-type: text/plain; charset=utf-8"
WARNING:  ExecuteOAIRequest (Identify): request to 'https://www.bioj-online.com/jms/index.php/up/oai/' failed (2)
WARNING:  HeaderCallbackFunction: unsupported header entry: "content-type: text/plain; charset=utf-8"
WARNING:  ExecuteOAIRequest (Identify): request to 'https://www.bioj-online.com/jms/index.php/up/oai/' failed (3)
ERROR:  ExecuteOAIRequest => (23) Failed writing header

SELECT * FROM OAI_Identify('oai_server_bjihs');
       name        |                                          description                                           
-------------------+------------------------------------------------------------------------------------------------
 repositoryName    | Brazilian Journal of Implantology and Health Sciences  
 baseURL           | https://bjihs.emnuvens.com.br/bjihs/oai
 protocolVersion   | 2.0
 adminEmail        | journalbjihs@gmail.com
 earliestDatestamp | 2020-04-18T03:05:46Z
 deletedRecord     | persistent
 granularity       | YYYY-MM-DDThh:mm:ssZ
 compression       | gzip
 compression       | deflate
 description       | oaiojs.bjihs.emnuvens.com.br:oai:ojs.bjihs.emnuvens.com.br:article/1
 description       | Open Journal SystemsPublic Knowledge Projectpkp.contact@gmail.com3.2.1.1http://pkp.sfu.ca/ojs/
(11 rows)

SELECT * FROM OAI_Identify('oai_server_kbnl');
       name        |          description          
-------------------+-------------------------------
 repositoryName    | KB-MDO
 baseURL           | http://services.kb.nl/mdo/oai
 protocolVersion   | 2.0
 adminEmail        | dataservices@kb.nl
 earliestDatestamp | 1970-01-01T00:00:00Z
 deletedRecord     | transient
 granularity       | YYYY-MM-DDThh:mm:ssZ
(7 rows)

SELECT * FROM OAI_Identify('oai_server_davidrumsey');
       name        |                 description                 
-------------------+---------------------------------------------
 repositoryName    | David Rumsey Historical Maps
 baseURL           | http://www.davidrumsey.com/luna/servlet/oai
 protocolVersion   | 2.0
 adminEmail        | carto@davidrumsey.com
 earliestDatestamp | 1979-01-01T00:00:00Z
 deletedRecord     | no
 granularity       | YYYY-MM-DDThh:mm:ssZ
(7 rows)

